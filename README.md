Пусть есть проект на микросервисах, который что-то продает. Компания решила добавить поддержку промокодов, и для этого сделать новый микросервис PromocodeService. Необходимо его спроектировать. Условия:
1. Промокод - это сущность, характеристики которой - уникальный код (строка из символов [a-zA-Z0-9], то, что юзеры будут вводить при оформлении заказа для получения скидки), размер скидки (процент от стоимости заказа) и максимальное количество использований.
2. На старте понадобятся два формата кода промокода - рандомная строка из полного набора символов ([a-zA-Z0-9]) и рандомная строка только из цифр. Затем, возможно, потребуются другие форматы. Указание, какой формат использовать, будет поступать в запросе на генерацию промокода.
3. Сервис должен уметь две вещи - 1) генерировать промокод (получать на вход размер скидки, макс.кол-во использований и формат и отдавать в ответ код промокода), и 2) использовать промокод (получать на вход код промокода и отдавать по нему размер скидки, увеличивая счетчик использований, или признак того, что промокод недействителен).
4. Код промокода должен быть недлинным, т.е. использовать в качестве него, например, uuid не годится. Но строго длина не задана. Надо предложить нужную длину/длины.
5. У сервиса должно быть апи, остальные сервисы будут взаимодействовать с PromocodeService по нему.
6. Про авторизацию в апи думать не нужно, писать лог использований не нужно.
Подумать про:
- длины промокодов - предложить и обосновать
- примерные классы/интерфейсы
- схему/индексы базы данных
- дизайн апи